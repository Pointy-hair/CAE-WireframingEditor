<!doctype html>
<html>

<head>
  <meta name="generator" content="JSDoc 3.5.4">
  <meta charset="utf-8">
  <title>Source: tags/GenericTag.js</title>
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Karla:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Noto+Serif:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Inconsolata:500" type="text/css">
  <link href="css/baseline.css" rel="stylesheet">
</head>

<body onload="prettyPrint()">
  <nav id="jsdoc-navbar" role="navigation" class="jsdoc-navbar">
    <div id="jsdoc-navbar-container">
      <div id="jsdoc-navbar-content">
        <a href="index.html" class="jsdoc-navbar-package-name">Home</a>
      </div>
    </div>
  </nav>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-banner" role="banner">
        </div>
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <h1>Source: tags/GenericTag.js</h1>
          </header>
          <article>
            <pre class="prettyprint linenums"><code>/*global y*/
/**
 * @module Tags
 */
import {
    mxUtils,
    mxImage
} from &#x27;../misc/mxExport.js&#x27;;
import AbstractTag from &#x27;./AbstractTag.js&#x27;;
import CONST from &#x27;../misc/Constants.js&#x27;;
import Y from &#x27;yjs&#x27;;
import TagRegistry from &#x27;./TagRegistry.js&#x27;;


mxUtils.extend(GenericTag, AbstractTag);
AbstractTag.registerCodec(GenericTag);

/**
 * @classdesc A generic tag class that represents a tag defined in the VLS
 * @constructor
 * @extends AbstractTag
 * @param {UIControl | AbstractTag} cell a tag or a ui element
 * @param {*} offset the offset
 * @param {String} className the node class as defined in the VLS
 */
function GenericTag(cell, offset, className) {

    var reg;
    try{
        reg &#x3D; TagRegistry.get(className);
    }
    catch(e){
        reg &#x3D; null;
    }
            
    if (reg)
        AbstractTag.call(this, cell, new mxImage(reg.image, CONST.TAG.SIZE, CONST.TAG.SIZE), className, offset);
    else
        AbstractTag.call(this, cell, new mxImage(CONST.IMAGES.DEFAULT_TAG, CONST.TAG.SIZE, CONST.TAG.SIZE), className, offset);


    this.tagObj.setAttribute(&#x27;tagType&#x27;, className);

    this.initAttributes &#x3D; function () {
        var reg &#x3D; TagRegistry.get(this.tagObj.getAttribute(&#x27;tagType&#x27;));
        for (var attrKey in reg.attrs) {
            var type &#x3D; reg.attrs[attrKey];
            if (type &#x3D;&#x3D;&#x3D; &#x27;string&#x27;)
                this.tagObj.setAttribute(&#x27;_&#x27; + attrKey, &#x27;&#x27;);
            else if (type &#x3D;&#x3D;&#x3D; &#x27;boolean&#x27;)
                this.tagObj.setAttribute(&#x27;_&#x27; + attrKey, true);
            else {
                this.tagObj.setAttribute(&#x27;_&#x27; + attrKey, type[0]);
                this.getComboAttrMap().addComboAttr(&#x27;_&#x27; + attrKey, type);
            }
        }
    }

    this.createShared &#x3D; function (createdByLocalUser) {
        if (createdByLocalUser) {
            var attrs &#x3D; TagRegistry.get(this.tagObj.getAttribute(&#x27;tagType&#x27;)).attrs;
            for (var attrKey in attrs) {
                if (attrs.hasOwnProperty(attrKey) &amp;amp;&amp;amp; attrs[attrKey] &#x3D;&#x3D;&#x3D; &#x27;string&#x27;)
                    y.share.attrs.set(this.getId() + &#x27;_&#x27; + attrKey, Y.Text);
            }
        }
    }

    this.initShared &#x3D; function () {
        var attrs &#x3D; TagRegistry.get(this.tagObj.getAttribute(&#x27;tagType&#x27;)).attrs;
        for (var attrKey in attrs) {
            if (attrs.hasOwnProperty(attrKey) &amp;amp;&amp;amp; attrs[attrKey] &#x3D;&#x3D;&#x3D; &#x27;string&#x27;)
                this.initYText(&#x27;_&#x27; + attrKey);
        }
    }
    if (reg)
        this.initAttributes();

}
export default GenericTag;</code></pre>
          </article>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
  <footer id="jsdoc-footer" class="jsdoc-footer">
    <div id="jsdoc-footer-container">
      <p>
        Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> 3.5.4 on August 16, 2017.
      </p>
    </div>
  </footer>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/jquery.cookie.js"></script>
  <script src="scripts/tree.jquery.js"></script>
  <script src="scripts/prettify.js"></script>
  <script src="scripts/jsdoc-toc.js"></script>
  <script src="scripts/linenumber.js"></script>
  <script src="scripts/scrollanchor.js"></script>
</body>

</html>